<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MapCrown ‚Ä¢ Geo Explorer</title>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- Brevo form styles -->
  <link rel="stylesheet" href="https://sibforms.com/forms/end-form/build/sib-styles.css">

  <style>
    :root{
      --bg:#061225;
      --bg2:#071a33;
      --card:rgba(255,255,255,.06);
      --stroke:rgba(255,255,255,.12);
      --text:#eaf1ff;
      --muted:rgba(234,241,255,.72);
      --brand:#2be2ff;
      --brand2:#7aa7ff;
      --shadow:0 18px 55px rgba(0,0,0,.35);
      --r:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:
        radial-gradient(1200px 600px at 20% 0%, rgba(43,226,255,.10), transparent 60%),
        radial-gradient(900px 500px at 80% 10%, rgba(122,167,255,.12), transparent 55%),
        linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
      color:var(--text);
      overflow-x:hidden;
    }

    /* ===== Header ===== */
    .topbar{
      position:sticky; top:0; z-index:1000;
      background:rgba(6,18,37,.62);
      backdrop-filter: blur(14px);
      border-bottom:1px solid rgba(255,255,255,.08);
      padding:12px 14px;
    }
    .topbarInner{
      max-width:1200px; margin:0 auto;
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
    }
    .brand{
      display:flex; align-items:center; gap:10px; min-width:max-content;
      font-weight:900; letter-spacing:.2px;
    }
    .logoDot{
      width:34px;height:34px;border-radius:12px;
      background: linear-gradient(135deg, rgba(122,167,255,.95), rgba(43,226,255,.85));
      border:1px solid rgba(255,255,255,.16);
      display:grid; place-items:center;
      box-shadow: 0 10px 30px rgba(43,226,255,.20);
    }
    .brandText small{
      display:block; font-size:12px; font-weight:700; color:var(--muted); margin-top:2px;
    }

    .controls{
      display:flex; align-items:center; gap:8px; flex-wrap:wrap; justify-content:flex-end;
    }
    select, .btn{
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 12px;
      border-radius:999px;
      outline:none;
      font-weight:800;
      cursor:pointer;
    }
    select option{color:#0b1220}
    .btn{
      display:inline-flex; align-items:center; gap:8px;
      user-select:none;
      transition:transform .15s ease, background .15s ease;
    }
    .btn:hover{transform:translateY(-1px); background:rgba(255,255,255,.09)}
    .btn:active{transform:translateY(0px) scale(.99)}

    /* Desktop nav (NO subscribe here) */
    .navDesktop{display:flex; gap:8px; align-items:center;}
    .navLink{
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 12px;
      border-radius:999px;
      cursor:pointer;
      font-weight:900;
    }

    /* Mobile menu button only on mobile */
    .menuBtn{display:none;}
    .menuBtn .bars{font-size:18px}

    /* Mobile menu dropdown */
    .menu{
      position:absolute;
      right:14px;
      top:64px;
      width:min(280px, 86vw);
      background:rgba(7,20,39,.92);
      border:1px solid rgba(255,255,255,.12);
      border-radius:16px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .menuItem{
      width:100%;
      text-align:left;
      padding:12px 14px;
      border:0;
      background:transparent;
      color:var(--text);
      cursor:pointer;
      font-weight:900;
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .menuItem:last-child{border-bottom:0}
    .menuItem:hover{background:rgba(255,255,255,.07)}
    .hidden{display:none !important;}

    /* ===== Main ===== */
    .wrap{
      max-width:1200px;
      margin:14px auto 18px;
      padding:0 14px;
      display:grid;
      grid-template-columns: 1fr 360px;
      gap:14px;
      align-items:stretch;
    }
    .stage, .panel{
      border:1px solid rgba(255,255,255,.10);
      border-radius: var(--r);
      background: rgba(255,255,255,.05);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    #map{
      height: calc(100vh - 150px);
      min-height:520px;
      width:100%;
      background:#0b1220;
    }

    .panel{display:flex; flex-direction:column;}
    .panelHead{
      padding:14px;
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .panelHead h2{margin:0 0 6px; font-size:18px}
    .panelHead p{margin:0; color:var(--muted); font-size:13px; line-height:1.45;}
    .panelBody{padding:12px 14px 14px; overflow:auto;}
    .card{
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      border-radius:16px;
      padding:12px;
      margin-bottom:12px;
    }
    .krow{
      display:flex; justify-content:space-between; gap:10px;
      padding:7px 0;
      border-bottom:1px dashed rgba(255,255,255,.10);
    }
    .krow:last-child{border-bottom:0}
    .k{color:var(--muted); font-weight:800}
    .v{font-weight:900}
    .details{color:rgba(234,241,255,.92); font-size:14px; line-height:1.55;}

    /* ===== Modal ===== */
    .modal{
      position:fixed; inset:0;
      background:rgba(0,0,0,.58);
      backdrop-filter: blur(10px);
      display:grid; place-items:center;
      z-index:10000;
      padding:14px;
    }
    .modalCard{
      width:min(720px, 96vw);
      border-radius:20px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(7,20,39,.92);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .modalHead{
      display:flex; justify-content:space-between; align-items:center;
      padding:14px;
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .modalHead h3{margin:0; font-size:17px}
    .modalBody{padding:14px}

    /* Brevo theme overrides (premium dark) */
    .brevoWrap{
      border-radius:18px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    }
    .sib-form{background:transparent !important;}
    #sib-container{
      background: transparent !important;
      border:0 !important;
      max-width:100% !important;
    }
    #sib-container input.input{
      border-radius:14px !important;
      border:1px solid rgba(255,255,255,.14) !important;
      background:rgba(255,255,255,.06) !important;
      color:var(--text) !important;
      padding:14px 14px !important;
      font-weight:900 !important;
      outline:none !important;
    }
    #sib-container input::placeholder{color:rgba(234,241,255,.55) !important;}
    .sib-form-block__button{
      border-radius:14px !important;
      background: linear-gradient(135deg, rgba(43,226,255,.35), rgba(122,167,255,.25)) !important;
      border:1px solid rgba(43,226,255,.35) !important;
      color:var(--text) !important;
      padding:12px 14px !important;
      font-weight:900 !important;
      width:100% !important;
    }

    /* Footer */
    .footer{
      max-width:1200px; margin:10px auto 26px; padding:0 14px;
      color:var(--muted); font-size:13px;
      display:flex; justify-content:space-between; flex-wrap:wrap; gap:10px;
    }

    /* Mobile layout */
    @media (max-width: 980px){
      .wrap{grid-template-columns:1fr; gap:12px;}
      #map{height: calc(100vh - 210px); min-height:460px;}
      .navDesktop{display:none;}
      .menuBtn{display:inline-flex;}
      .controls select{max-width:155px;}
    }
    @media (max-width: 480px){
      .brandText{display:none;}
    }
  </style>
</head>

<body>
  <header class="topbar">
    <div class="topbarInner">
      <div class="brand">
        <div class="logoDot">üëë</div>
        <div class="brandText">
          MapCrown
          <small>Satellite Map ‚Ä¢ Quiz ‚Ä¢ Geo Learning</small>
        </div>
      </div>

      <!-- Desktop nav (NO subscribe button here) -->
      <nav class="navDesktop" aria-label="Primary">
        <button class="navLink" type="button" data-nav="home">Home</button>
        <button class="navLink" type="button" data-nav="about">About</button>
        <button class="navLink" type="button" data-nav="contact">Contact</button>
      </nav>

      <div class="controls">
        <select id="category" title="Category">
          <option value="countries">Countries</option>
          <option value="states">States</option>
          <option value="cities">Cities</option>
          <option value="rivers">Rivers</option>
          <option value="mountains">Mountains</option>
        </select>

        <select id="examMode" title="Exam Mode">
          <option value="general">General</option>
          <option value="upsc">UPSC</option>
          <option value="nda">NDA</option>
          <option value="cds">CDS</option>
          <option value="ssc">SSC</option>
        </select>

        <!-- Mobile menu button (shows only on mobile) -->
        <button id="menuBtn" class="btn menuBtn" type="button" aria-haspopup="true" aria-expanded="false" aria-controls="mobileMenu">
          <span class="bars">‚ò∞</span>
          Menu
        </button>
      </div>
    </div>

    <!-- Mobile Menu (subscribe ONLY here) -->
    <div id="mobileMenu" class="menu hidden" role="menu" aria-label="Mobile menu">
      <button class="menuItem" type="button" data-nav="home">üè† Home</button>
      <button class="menuItem" type="button" data-nav="about">üë§ About Founder</button>
      <button class="menuItem" type="button" data-nav="contact">‚úâÔ∏è Contact</button>
      <button class="menuItem" type="button" id="openSubscribe">üì© Subscribe</button>
    </div>
  </header>

  <main class="wrap" id="home">
    <section class="stage">
      <div id="map"></div>
    </section>

    <aside class="panel">
      <div class="panelHead">
        <h2 id="title">Select something</h2>
        <p>Choose a category, then click on the map. Details will appear here.</p>
      </div>
      <div class="panelBody">
        <div class="card">
          <div class="krow"><span class="k">Name</span><span id="cName" class="v">‚Äî</span></div>
          <div class="krow"><span class="k">Type</span><span id="cType" class="v">‚Äî</span></div>
          <div class="krow"><span class="k">Exam</span><span id="modeText" class="v">GENERAL</span></div>
        </div>

        <div class="card">
          <div class="details" id="details">
            Tip: Turn on Countries/States and click a region to view details.
          </div>
        </div>

        <div class="card">
          <div class="details">
            üì© On mobile, open <b>Menu</b> ‚Üí <b>Subscribe</b> to get updates.
          </div>
        </div>
      </div>
    </aside>
  </main>

  <footer class="footer">
    <div><b style="color:var(--text)">MapCrown</b> ‚Ä¢ Satellite map learning for competitive exams</div>
    <div>Created by <b style="color:var(--text)">Himanshu Kumar</b> ‚Ä¢ ¬© <span id="yr"></span></div>
  </footer>

  <!-- Subscribe Modal -->
  <div id="subModal" class="modal hidden" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modalCard">
      <div class="modalHead">
        <h3>üì© Join MapCrown Newsletter</h3>
        <button id="closeSub" class="btn" type="button">Close</button>
      </div>
      <div class="modalBody">
        <div class="details" style="margin-bottom:10px;">
          Get geography practice tips + updates. Please confirm subscription via email (double opt-in).
        </div>

        <div class="brevoWrap">
          <!-- Clean minimal form using your Brevo action URL -->
          <div class="sib-form" style="text-align:center;">
            <div id="sib-container" class="sib-container--large sib-container--vertical" style="direction:ltr">
              <form id="sib-form" method="POST"
                action="https://db151eb5.sibforms.com/serve/MUIFADqAs_XXKqNfYAF7xFrF9YRCZD_vkNiqLSQflLgICazHcrDQsHyRVzLTzcMffVXJ0fBw2lMh7dmIkD5iMUxzMGr_35NLQkWCPyLXaBreyPR2sTS-Xu97alcBDyeOeSBiCI0sUqeNUUtz9OumNhfmYAgzPQPgy9-Q-CsXqN-W9zTKoLP0vt2dCOqiwHAEfKXPK8ySZOjy71grgw=="
                data-type="subscription">

                <div style="padding: 12px 0 6px;">
                  <div style="font-size:20px;text-align:left;font-weight:900;color:#eaf1ff;">
                    Start Your Geography Journey üåç
                  </div>
                </div>

                <div style="padding: 6px 0 12px;">
                  <div style="text-align:left;color:rgba(234,241,255,.75);font-weight:700;">
                    UPSC ‚Ä¢ NDA ‚Ä¢ CDS ‚Ä¢ SSC ‚Äî practice smarter with MapCrown.
                  </div>
                </div>

                <div style="padding: 8px 0;">
                  <div class="sib-input sib-form-block">
                    <div class="form__entry entry_block">
                      <div class="form__label-row">
                        <label class="entry__label" style="font-weight:900;text-align:left;font-size:14px;color:#eaf1ff;" for="EMAIL" data-required="*">
                          Email address
                        </label>
                        <div class="entry__field">
                          <input class="input" type="email" id="EMAIL" name="EMAIL" autocomplete="email"
                            placeholder="you@example.com" data-required="true" required />
                        </div>
                      </div>
                      <label class="entry__specification" style="font-size:12px;text-align:left;color:rgba(234,241,255,.55);font-weight:700;">
                        No spam. Unsubscribe anytime.
                      </label>
                    </div>
                  </div>
                </div>

                <div style="padding: 10px 0 2px;">
                  <div class="sib-form-block" style="text-align:left">
                    <button class="sib-form-block__button sib-form-block__button-with-loader" form="sib-form" type="submit">
                      Join Now üöÄ
                    </button>
                  </div>
                </div>

                <input type="text" name="email_address_check" value="" class="input--hidden">
                <input type="hidden" name="locale" value="en">
              </form>
            </div>
          </div>
        </div>

        <div class="details" style="margin-top:10px;font-size:12px;color:rgba(234,241,255,.55);">
          If you don‚Äôt receive email, check Spam/Promotions and mark ‚ÄúNot spam‚Äù.
        </div>
      </div>
    </div>
  </div>

  <!-- Leaflet -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Brevo script (required for their form system; safe to keep) -->
  <script defer src="https://sibforms.com/forms/end-form/build/main.js"></script>

  <script>
    // Footer year
    document.getElementById("yr").textContent = new Date().getFullYear();

    // ===== Map init (Satellite) =====
    const map = L.map("map", { zoomControl: true }).setView([20.5937, 78.9629], 4);

    // ESRI Satellite
    L.tileLayer(
      "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
      { maxZoom: 19, attribution: "Tiles ¬© Esri" }
    ).addTo(map);

    // Labels overlay (makes satellite readable)
    L.tileLayer(
      "https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",
      { maxZoom: 19 }
    ).addTo(map);

    // ===== UI: exam mode text =====
    const examMode = document.getElementById("examMode");
    const modeText = document.getElementById("modeText");
    examMode.addEventListener("change", () => {
      modeText.textContent = (examMode.value || "general").toUpperCase();
    });

    // ===== Professional Mobile Menu (no inline onclick) =====
    const menuBtn = document.getElementById("menuBtn");
    const mobileMenu = document.getElementById("mobileMenu");

    function openMenu(){
      mobileMenu.classList.remove("hidden");
      menuBtn.setAttribute("aria-expanded", "true");
    }
    function closeMenu(){
      mobileMenu.classList.add("hidden");
      menuBtn.setAttribute("aria-expanded", "false");
    }
    function toggleMenu(){
      const isHidden = mobileMenu.classList.contains("hidden");
      isHidden ? openMenu() : closeMenu();
    }

    menuBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      toggleMenu();
    });

    // close on outside click
    document.addEventListener("click", (e) => {
      if (mobileMenu.classList.contains("hidden")) return;
      const inside = mobileMenu.contains(e.target) || menuBtn.contains(e.target);
      if (!inside) closeMenu();
    });

    // close on ESC
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        closeMenu();
        closeSubscribe();
      }
    });

    // ===== Subscribe modal =====
    const subModal = document.getElementById("subModal");
    const openSubscribeBtn = document.getElementById("openSubscribe");
    const closeSubBtn = document.getElementById("closeSub");

    function openSubscribe(){
      subModal.classList.remove("hidden");
      subModal.setAttribute("aria-hidden", "false");
      closeMenu();
    }
    function closeSubscribe(){
      subModal.classList.add("hidden");
      subModal.setAttribute("aria-hidden", "true");
    }

    openSubscribeBtn.addEventListener("click", openSubscribe);
    closeSubBtn.addEventListener("click", closeSubscribe);
    subModal.addEventListener("click", (e) => {
      if (e.target === subModal) closeSubscribe();
    });

    // ===== Auto popup after 10s (first visit only) =====
    (function autoPopup(){
      const KEY = "mapcrown_sub_popup_seen_v1";
      if (localStorage.getItem(KEY) === "1") return;
      setTimeout(() => {
        openSubscribe();
        localStorage.setItem(KEY, "1");
      }, 10000);
    })();

    // ===== Nav actions (replace with real pages/modals later) =====
    document.querySelectorAll("[data-nav]").forEach(btn => {
      btn.addEventListener("click", () => {
        const nav = btn.getAttribute("data-nav");
        closeMenu();
        if (nav === "home") window.scrollTo({ top: 0, behavior: "smooth" });
        if (nav === "about") document.getElementById("details").innerHTML =
          "<b>About Founder</b><br>MapCrown is created by <b>Himanshu Kumar</b> (Muzaffarpur) for UPSC/NDA/CDS/SSC learners.";
        if (nav === "contact") document.getElementById("details").innerHTML =
          "<b>Contact</b><br>Email: <b>support@mapcrown.online</b><br>We reply as soon as possible.";
      });
    });

    // NOTE:
    // Your ‚Äúmap selecting / details‚Äù depends on loading GeoJSON layers.
    // This file only sets a clean UI + satellite + subscribe.
    // If you paste your existing GeoJSON selection code here, selection will work again.
  </script>
</body>
</html>

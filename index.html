<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>MapCrown ‚Ä¢ Geo Explorer</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
  :root{
    --bg:#071427;
    --card:#0e1f3d;
    --stroke:#1e2c44;
    --text:#ffffff;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,Arial;background:var(--bg);color:var(--text);}

  /* FIXED HEADER (always above everything) */
  .topbar{
    position:fixed; top:0; left:0; right:0;
    height:60px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:10px 14px;
    background:rgba(7,20,39,.95);
    border-bottom:1px solid var(--stroke);
    z-index:999999; /* IMPORTANT */
  }
  .brand{font-weight:900; letter-spacing:.2px}

  /* Desktop nav (optional) */
  .topNav{display:flex; gap:10px; align-items:center;}
  .topNav button{
    background:var(--card);
    color:var(--text);
    border:1px solid rgba(255,255,255,.08);
    padding:8px 10px;
    border-radius:10px;
    cursor:pointer;
    font-weight:800;
  }

  /* MENU BUTTON (ALWAYS visible) */
  .menuBtn{
    width:44px;height:44px;
    display:grid;place-items:center;
    font-size:22px;
    background:var(--card);
    border:1px solid rgba(255,255,255,.10);
    color:var(--text);
    border-radius:12px;
    cursor:pointer;
    z-index:999999;
  }

  /* Mobile: hide topNav only (menu stays) */
  @media(max-width:768px){
    .topNav{display:none;}
  }

  /* MAP */
  #map{
    position:relative;
    height:calc(100vh - 60px);
    margin-top:60px;  /* push below header */
    z-index:1;
  }

  /* RIGHT PANEL */
  .panel{
    position:fixed;
    right:10px;
    top:75px;
    width:280px;
    background:rgba(14,31,61,.92);
    border:1px solid rgba(255,255,255,.10);
    padding:12px;
    border-radius:14px;
    z-index:9999;
    backdrop-filter: blur(10px);
  }
  .panel h3{margin:0 0 8px}
  .panel .muted{opacity:.85;font-size:13px;line-height:1.4}

  @media(max-width:768px){
    .panel{
      width:calc(100% - 20px);
      left:10px; right:10px;
      top:auto;
      bottom:10px;
    }
  }

  /* MENU DROPDOWN (must be ABOVE map) */
  .mobileMenu{
    position:fixed;
    top:70px;
    right:10px;
    width:220px;
    background:rgba(14,31,61,.97);
    border:1px solid rgba(255,255,255,.12);
    border-radius:16px;
    overflow:hidden;
    box-shadow:0 16px 50px rgba(0,0,0,.45);
    z-index:999999; /* IMPORTANT */
    display:none;
  }
  .mobileMenu button{
    width:100%;
    text-align:left;
    padding:12px 12px;
    border:0;
    background:transparent;
    color:var(--text);
    font-weight:900;
    cursor:pointer;
    border-bottom:1px solid rgba(255,255,255,.08);
  }
  .mobileMenu button:last-child{border-bottom:0}

  /* MODAL */
  .modal{
    position:fixed; inset:0;
    background:rgba(0,0,0,.65);
    display:none;
    align-items:center;
    justify-content:center;
    padding:14px;
    z-index:999999;
  }
  .modalBox{
    width:min(520px, 94vw);
    background:rgba(14,31,61,.98);
    border:1px solid rgba(255,255,255,.12);
    border-radius:18px;
    padding:16px;
    box-shadow:0 18px 60px rgba(0,0,0,.55);
  }
  .modalBox h3{margin:0 0 8px}
  .modalBox p{margin:0 0 10px; opacity:.9; line-height:1.55}
  .closeBtn{
    margin-top:10px;
    padding:10px 12px;
    border-radius:12px;
    border:1px solid rgba(255,255,255,.12);
    background:rgba(255,255,255,.06);
    color:#fff;
    cursor:pointer;
    font-weight:900;
  }
  a{color:#7aa7ff}
</style>
</head>

<body>

<header class="topbar">
  <div class="brand">üëë MapCrown</div>

  <nav class="topNav">
    <button data-page="home" type="button">Home</button>
    <button data-page="about" type="button">About</button>
    <button data-page="contact" type="button">Contact</button>
  </nav>

  <!-- MENU BUTTON ALWAYS VISIBLE -->
  <button class="menuBtn" id="menuBtn" type="button" aria-label="Menu">‚ò∞</button>
</header>

<!-- Dropdown Menu -->
<div id="menu" class="mobileMenu">
  <button data-page="home" type="button">üè† Home</button>
  <button data-page="about" type="button">üë§ About Founder</button>
  <button data-page="contact" type="button">üìß Contact</button>
</div>

<div id="map"></div>

<!-- Details Panel -->
<div class="panel">
  <h3 id="title">Ready</h3>
  <div class="muted"><b>Name:</b> <span id="name">‚Äî</span></div>
  <div class="muted" id="details" style="margin-top:6px;">Tap the map to see lat/long.</div>
</div>

<!-- Modal -->
<div id="modal" class="modal" role="dialog" aria-modal="true">
  <div class="modalBox" id="modalBox"></div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
  // MAP
  const map = L.map('map').setView([20,78],3);
  L.tileLayer(
    "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
    { maxZoom: 19 }
  ).addTo(map);

  map.on("click", (e) => {
    const lat = e.latlng.lat.toFixed(4);
    const lng = e.latlng.lng.toFixed(4);
    document.getElementById("title").textContent = "Selected";
    document.getElementById("name").textContent = "Location";
    document.getElementById("details").innerHTML = `Latitude: <b>${lat}</b><br>Longitude: <b>${lng}</b>`;
  });

  // MENU LOGIC (NO ONCLICK, PURE JS)
  const menuBtn = document.getElementById("menuBtn");
  const menu = document.getElementById("menu");

  function openMenu(){
    menu.style.display = "block";
  }
  function closeMenu(){
    menu.style.display = "none";
  }
  function toggleMenu(){
    if(menu.style.display === "block") closeMenu();
    else openMenu();
  }

  menuBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    toggleMenu();
  });

  // close menu if clicking outside
  document.addEventListener("click", (e) => {
    const inside = menu.contains(e.target) || menuBtn.contains(e.target);
    if(!inside) closeMenu();
  });

  // MODAL
  const modal = document.getElementById("modal");
  const modalBox = document.getElementById("modalBox");

  function openModal(html){
    modalBox.innerHTML = html;
    modal.style.display = "flex";
  }
  function closeModal(){
    modal.style.display = "none";
  }
  modal.addEventListener("click", (e) => {
    if(e.target === modal) closeModal();
  });

  // PAGE HANDLERS
  function openPage(page){
    closeMenu();
    if(page === "home"){
      closeModal();
      return;
    }
    if(page === "about"){
      openModal(`
        <h3>About Founder</h3>
        <p><b>Himanshu Kumar</b> ‚Äî Creator of MapCrown.</p>
        <p>MapCrown is built for geography learning and exam preparation (UPSC, NDA, CDS, SSC). Clean map exploration + fast revision.</p>
        <p><b>Location:</b> Muzaffarpur</p>
        <button class="closeBtn" type="button" onclick="(${closeModal.toString()})()">Close</button>
      `);
      return;
    }
    if(page === "contact"){
      openModal(`
        <h3>Contact</h3>
        <p>For support or feedback, email:</p>
        <p><a href="mailto:support@mapcrown.online">support@mapcrown.online</a></p>
        <button class="closeBtn" type="button" onclick="(${closeModal.toString()})()">Close</button>
      `);
      return;
    }
  }

  document.querySelectorAll("[data-page]").forEach(btn=>{
    btn.addEventListener("click", ()=>openPage(btn.dataset.page));
  });
</script>

</body>
</html>
